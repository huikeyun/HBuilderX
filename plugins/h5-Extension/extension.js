/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={817:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"360.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.360",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={_360Publish:async function(e){let t=a(7,null,"360"),n=a(8,null,"360"),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let n=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:n})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e._360NameInput&&(u=e._360NameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(t){s&&o.writePublishConfig(s,{_360NameInput:t.nameInput}),r({workspaceFolder:l,name:t.nameInput,customId:e.args.customId})}))}}},329:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"alipay.js"));var r=n(147);async function s(e){let t=a(0,null),n=a(1,null),o=a(2,null);const r="minidev-ci";let s=a(3,null,r),u=i.window.createOutputChannel("HBuilder"),c=a(4,null),p=a(5,null);if(e&&e.upload){let t=await i.extensions.existsPlugin(r);if(0!=t.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:t.msg,status:"Error"}):u.appendLine(t.msg));if(!t.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:s,status:"Error"}),i.extensions.installPlugin(r)):i.window.showMessageBox({type:"warning",title:"",text:s,buttons:[c,p]}).then((e=>{console.log(e),e==c&&i.extensions.installPlugin(r)})))}e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let d=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.alipay",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage,upload:e.upload});if(d&&0==d.code){if(e&&e.upload){let t=i.extensions.getExtension(r);return void(t&&await t.upload({appid:e.appid,buildClientPath:d.buildClientPath,privatekey:e.privatekey,version:e.version,description:e.description,clientId:e.clientId}))}if(!d.buildServerPath&&!d.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else u.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function u(e){let t=a(6,null),n=a(7,null),i=a(8,null),o=a(9,null),l=a(10,null),r=a(11,null),s=a(12,null),u=`${a(13,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(14,null)}</a>`,c=a(15,null),p=`${a(16,null)} <a href="https://hx.dcloud.net.cn/cli/publish-mp-alipay?id=uploadPrivateKey">${l}</a>`,d=a(17,null),h=a(18,null),m=a(19,null);return{customButtons:[{text:t},{text:i},{text:n,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:r,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:s,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:u,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:c,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""},{type:"checkBox",name:"uploadCheckBox",label:p,value:!!e.uploadAlipayCheckBox&&e.uploadAlipayCheckBox},{type:"input",name:"alipayVersionInput",placeholder:d,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.alipayVersionInput},{type:"fileSelectInput",name:"fileSelectInput",placeholder:h,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.fileSelectInput?e.fileSelectInput:""},{type:"input",name:"alipayDescInput",placeholder:m,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.alipayDescInput}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={aliPublish:async function(e){let t=a(20,null,a(21,null)),n=a(22,null,a(23,null)),l=a(24,null,a(25,null)),c=a(26,null),p=a(27,null),d=a(28,null),h=a(29,null),m=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.args.clientId;if(null==e.args.name||null==e.args.name)return void i.cliconsole.log({clientId:l,msg:t,status:"Error"});let a=e.args.appid;if(null==a||null==a){let e=o.getAppInfo(m,"mp-alipay");if(e&&e.appid&&(a=e.appid),null==a)return void i.cliconsole.log({clientId:l,msg:n,status:"Error"})}if(e.args.upload){if(!e.args.version)return void i.cliconsole.log({clientId:l,msg:p,status:"Error"});if(!e.args.privatekey)return void i.cliconsole.log({clientId:l,msg:d,status:"Error"});if(!r.existsSync(e.args.privatekey))return void i.cliconsole.log({clientId:l,msg:h,status:"Error"})}return void s({workspaceFolder:m,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l,upload:e.args.upload,version:e.args.version,description:e.args.description,privatekey:e.args.privatekey})}let f,I,g,w,b=m.id,v=m.name,k=o.getAppInfo(m,"mp-alipay");if(k&&k.appid&&(f=k.appid),b){let e=o.readPublishConfig(b);e&&(e.alipayNameInput&&(v=e.alipayNameInput),!f&&e.alipayAppidInput&&(f=e.alipayAppidInput),!I&&e.alipayVersion&&(I=e.alipayVersion),!g&&e.alipayPrivatekey&&(g=e.alipayPrivatekey),!w&&e.alipayVersionDesc&&(w=e.alipayVersionDesc))}i.window.showFormDialog({validate:async function(e){if(!e.nameInput)return this.showError(t),!1;if(o.getInvalidInputName().includes(e.nameInput))return this.showError(l),!1;if(!e.appidInput)return this.showError(n),!1;if(e.subPackageCheckBox&&!e.subPackageInput)return this.showError(c),!1;if(e.uploadCheckBox){if(!e.alipayVersionInput)return this.showError(p),!1;if(!e.fileSelectInput)return this.showError(d),!1;if(!r.existsSync(e.fileSelectInput))return this.showError(h),!1}return!0},onChanged:function(e,t,n){if(1==n.uploadCheckBox&&(n.uploadAlipayCheckBox=!0),"subPackageCheckBox"==e){let e=u(n);return this.updateForm(e),!0}if("uploadCheckBox"==e){n.alipayVersionInput||(n.alipayVersionInput=I),n.fileSelectInput||(n.fileSelectInput=g),n.alipayDescInput||(n.alipayDescInput=w);let e=u(n);this.updateForm(e)}return!0},...u({nameInput:v,appidInput:f,subPackageCheckBox:!1,alipayVersionInput:I,fileSelectInput:g,alipayDescInput:w})}).then((function(t){if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:b,optionType:"mp-alipay.appid"});if(1===t.buttonIndex)return;const n=t.result;if(b){let e={alipayNameInput:n.nameInput,alipayAppidInput:n.appidInput};n.uploadCheckBox&&(e.alipayVersion=n.alipayVersionInput,e.alipayPrivatekey=n.fileSelectInput,e.alipayVersionDesc=n.alipayDescInput),o.writePublishConfig(b,e)}s({workspaceFolder:m,name:n.nameInput,appid:n.appidInput,subPackage:n.subPackageInput,customId:e.args.customId,clientId:e.args.clientId,upload:n.uploadCheckBox,version:n.alipayVersionInput,description:n.alipayDescInput,privatekey:n.fileSelectInput})}))}}},508:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"baidu.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.baidu",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let t=a(3,null),n=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:t},{text:i},{text:n,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={bdPublish:async function(e){let t=a(12,null,a(13,null)),n=a(14,null,a(15,null)),l=a(16,null,a(17,null)),u=a(18,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"});let a=e.appid;if(null==a||null==a){let t=o.getAppInfo(c,"mp-baidu");if(t&&t.appid&&(a=t.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-baidu");if(console.log("baiduInfo",m),m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.baiduNameInput&&(h=e.baiduNameInput),!p&&e.baiduAppidInput&&(p=e.baiduAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){if("subPackageCheckBox"==e){let e=s(n);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(t){if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-baidu.appid"});if(1===t.buttonIndex)return;const n=t.result;d&&o.writePublishConfig(d,{baiduNameInput:n.nameInput,baiduAppidInput:n.appidInput}),r({workspaceFolder:c,name:n.nameInput,appid:n.appidInput,subPackage:n.subPackageInput,customId:e.args.customId})}))}}},275:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"bytedance.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.bytedance",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let t=a(3,null),n=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:t},{text:i},{text:n,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={btPublish:async function(e){let t=a(12,null,a(13,null)),n=a(14,null,a(15,null)),l=a(16,null,a(17,null)),u=a(18,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"});let a=e.appid;if(null==a||null==a){let t=o.getAppInfo(c,"mp-toutiao");if(t&&t.appid&&(a=t.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-toutiao");if(m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.bytedanceNameInput&&(h=e.bytedanceNameInput),!p&&e.bytedanceAppidInput&&(p=e.bytedanceAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){if("subPackageCheckBox"==e){let e=s(n);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(t){if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-toutiao.appid"});if(1===t.buttonIndex)return;const n=t.result;d&&o.writePublishConfig(d,{bytedanceNameInput:n.nameInput,bytedanceAppidInput:n.appidInput}),r({workspaceFolder:c,name:n.nameInput,appid:n.appidInput,subPackage:n.subPackageInput,customId:e.args.customId})}))}}},460:(e,t,n)=>{var i=n(283);e.exports={compile:function(e){return new Promise(((t,n)=>{i.request("MainHostPublish.compile",e).then((e=>{t(e)}),n)}))}}},24:(e,t,n)=>{var i=n(283);const o=n(930),l=n(301),a=n(192),r=n(508),s=n(329),u=n(275),c=n(829),p=n(817),d=n(864),h=n(97),m=n(8),f=n(369);e.exports={activate:function(e){i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.weapp",(e=>{o.weAppPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.h5",(e=>{l.h5Publish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.jingdong",(e=>{a.jdPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.baidu",(e=>{r.bdPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.alipay",(e=>{s.aliPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.bytedance",(e=>{u.btPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.qq",(e=>{c.qqPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.360",(e=>{p._360Publish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.kuaishou",(e=>{d.ksPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.huawei",(e=>{h.hwPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.quickappunion",(e=>{m.qauPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.nApp.export.wgt",(e=>{f.exportWgt(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.nApp.export.resource",(e=>{f.exportResource(e)}))},deactivate:function(){}}},301:(e,t,n)=>{var i=n(283),o=(n(147),n(37),n(460)),l=n(325);const a=n(942).loadMessageBundle(n(17).join(__dirname,"h5.js")),r=a(0,null),s=a(1,null),u=a(2,null),c=a(3,null),p=a(4,null),d=a(5,null),h=a(6,null),m=a(7,null);function f(e,t,n){let i=a(8,null),o=`<a href="https://hx.dcloud.net.cn/cli/publish-h5">${a(9,null)}</a>`,l=`${r} <a href='https://uniad.dcloud.net.cn'>uniAD</a> ${s}，<a href='https://uniad.dcloud.net.cn/login'>${u}</a> | <a href='https://uniapp.dcloud.io/component/ad.html'>${c}</a>`,p=a(10,null),d=a(11,null),h=a(12,null),m=a(13,null),f=`${a(14,null)} <a href='https://uniapp.dcloud.net.cn/ssr?id=distribute'>${a(15,null)}</a>`;const I=a(16,null);let g=`${a(17,null)} <a href="https://uniapp.dcloud.io/uniCloud/hosting.html">${I}</a>`;const w=`${a(18,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${I}</a>`;return{title:i,hideSubTitile:!0,width:600,height:e.webHostingCheckBox?480:200,footer:l,cornerWidget:{type:"label",name:"cornerTip",text:o},formItems:[{type:"input",name:"websiteTitle",label:p,placeholder:d,value:e.websiteTitle?e.websiteTitle:""},{type:"input",name:"websiteDomain",label:h,placeholder:m,value:e.websiteDomain?e.websiteDomain:""},{type:"checkBox",name:"uploadSourceMap",label:w,value:!!e.uploadSourceMap&&e.uploadSourceMap},{type:"checkBox",name:"ssrCheckBox",label:f,value:e.ssrCheckBox,isHidden:!t},{type:"checkBox",name:"webHostingCheckBox",label:g,value:e.webHostingCheckBox},{type:"spaceList",name:"selectSpaceList",isHidden:!e.webHostingCheckBox,projectId:n.id,selectedSpaceId:void 0!==e.selectedSpaceId?e.selectedSpaceId:""}].map((e=>{if(e&&!e.isHidden)return e}))}}function I(e){let t=a(19,null),n=[];for(var i=0;i<e.length;i++){var o=[{label:e[i].domain}];n.push({columns:o})}return{title:t,width:480,height:320,formItems:[{type:"list",title:"",name:"domainList",columnStretches:[1,2],items:n}]}}async function g(e){let t=a(20,null),n=a(21,null),l=a(22,null),h=a(23,null),m=a(24,null),f=`${a(25,null)}:https://uniapp.dcloud.net.cn/uniCloud/http`,I=a(26,null),g=a(27,null);const w=`${r}[uniAD](https://uniad.dcloud.net.cn/)${s}，[${u}](https://uniad.dcloud.net.cn/login) | [${c}](https://uniapp.dcloud.io/component/ad.html)`;let b=a(28,null);const v=a(29,null,"unicloud"),k=p,y=d;e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let x=await o.compile({workspaceFolder:e.workspaceFolder,issuessr:e.ssr,domain:e.domain,type:"h5",customId:e.customId,websiteTitle:e.webTitle,websiteDomain:e.webDomain,clientId:e.clientId,uploadSourceMap:e.uploadSourceMap}),C=i.window.createOutputChannel("HBuilder");if(x&&0==x.code){if(!x.buildServerPath&&!x.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:l,status:"Error"}));if(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"}),e.webHosting){e.ssr?(C.appendLine(h),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:h,status:"Info"})):(C.appendLine(m),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:m,status:"Info"}));let t=function(e){return 1===e?"aliyun":2===e?"tcb":"aliyun"};const n=e.selectSpaceList,o=t(n.spaceType),l=x.buildClientPath;let a=x.buildServerPath;const r=async function(t){if(e.ssr){"/"!=a.endsWith&&(a+="/");var n=e.funcitonPath+"/server";0==await i.workspace.copyFileWithPrompt({src:i.Uri.file(a),dest:i.Uri.file(n),rootPromptTips:b,filePromptTips:b,defaction:"replace",showcomparebutton:!1,filter:function(e){return 0},errorHandler:function(e){return 0}})&&(C.appendLine(f),C.appendLine(I),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:f,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:I,status:"Info"})),await i.unicloud.uploadCloudFuntion(e.workspaceFolder,e.funcitonPath),C.appendLine(g),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:g,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"})))}else C.appendLine(g),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:g,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"}))};if("aliyun"===o)i.unicloud.staticDeployFiles(e.workspaceFolder,e.selectSpaceList,x.buildClientPath,(function(e){}),r,{isCli:!!e.isCli,clientId:e.clientId});else if("tcb"===o){const t="unicloud";let a=await i.extensions.existsPlugin(t);if(0!=a.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:a.msg,status:"Error"}):C.appendLine(a.msg));if(!a.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:v,status:"Error"}),i.extensions.installPlugin(t)):i.window.showMessageBox({type:"warning",title:"",text:v,buttons:[k,y]}).then((e=>{console.log(e),e==k&&i.extensions.installPlugin(t)})));{let a=i.extensions.getExtension(t);a?a.staticFilesDeploy({spaceInfo:{...n,provider:o},workspaceFolder:e.workspaceFolder,filePaths:l,consoleOptions:e.isCli?{isCli:!0,id:e.clientId}:{isCli:!1,id:"workbench.view.console"}}).then((async()=>{await r(e.workspaceFolder)})):(C.appendLine(v),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:v,status:"Error"}))}}}else i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"})}else C.appendLine(l),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:l,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"}))}e.exports={h5Publish:async function(e){let t=a(30,null),n=m,o=a(31,null),r=a(32,null),s=a(33,null),u=p,c=d,w=a(34,null),b=a(35,null),v=h,k=m,y=a(36,null),x=a(37,null),C=h,P=m,E=a(38,null),B=a(39,null),S=a(40,null);const j=a(41,null);let F,N=e.workspaceFolder,O=e.args,q=O.clientId;if(O&&O.isCli){if(l.getInvalidInputName().includes(O.webTitle))return void i.cliconsole.log({clientId:q,msg:r,status:"Error"});if(O.ssrPublish){var L=await i.unicloud.unimodulesExistsModule(N,"uni-ssr");if(F=L.funcitonPath,0==L.exist)return void i.cliconsole.log({clientId:q,msg:s,status:"Error"})}let t,n;if(O.webHosting){let e=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/space/list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:O.provider,appid:N.appid}}});if(!e.service||1001!=e.service.code){let t;return t=200==e.httpStatusCode?e.service.description:e.error,void i.cliconsole.log({clientId:q,msg:t,status:"Error"})}if(t=function(e,t){for(let n in e){let i=e[n];if(i.id==t)return{spaceId:t,spaceType:"aliyun"===i.provider?1:2,spaceName:i.name,apiEndpoint:i.apiEndpoint,clientSecret:i.clientSecret,isOpenHostingService:i.haveHostingService,isOwner:i.isOwner}}return{spaceId:"",spaceType:1,spaceName:"",apiEndpoint:"",clientSecret:"",isOpenHostingService:!1,isOwner:!0}}(e.service.body.spaces,O.spaceId),0==t.isOpenHostingService)return void i.cliconsole.log({clientId:q,msg:b,status:"Error"});if(O.ssrPublish){let e=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:N});if(0!=e.code)return void i.cliconsole.log({clientId:q,msg:S,status:"Error"});{if(!e.unicloud)return void i.cliconsole.log({clientId:q,msg:B,status:"Error"});let t=e.spaceId;if(""==t||null==t||null==t)return void i.cliconsole.log({clientId:q,msg:S,status:"Error"})}let t,o=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/host/domain-list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:O.provider,spaceId:O.spaceId,appid:N.appid}}});if(!o.service||1001!=o.service.code)return void(200==o.httpStatusCode?i.cliconsole.log({clientId:q,msg:o.service.description,status:"Error"}):i.cliconsole.log({clientId:q,msg:o.error,status:"Error"}));if(t=o.service.body.domains,!(t.length>0))return void i.cliconsole.log({clientId:q,msg:x,status:"Error"});n=t[0].domain}}return await g({workspaceFolder:e.workspaceFolder,ssr:O.ssrPublish,domain:n,customId:O.customId,webTitle:O.webTitle,webDomain:O.webDomain,webHosting:O.webHosting,clientId:O.clientId,funcitonPath:F,selectSpaceList:t,uploadSourceMap:O.sourceMap,isCli:!0}),void i.cliconsole.log({clientId:e.args.clientId,msg:"",status:"Error"})}let M,T,D,A,H=3==N.vueVersion,W=e.args.customId,_=!1,$=!1;if(N.id){let e=l.readPublishConfig(N.id);e&&(e.websiteTitle&&(T=e.websiteTitle),e.websiteDomain&&(D=e.websiteDomain),void 0!==e.webHostingCheckBox&&(_=e.webHostingCheckBox),e.selectedSpaceId&&(A=e.selectedSpaceId),void 0!==e.h5UploadSourceMap&&($=e.h5UploadSourceMap))}let V=i.window.showFormDialog({submitButtonText:t,cancelButtonText:n,onOpened(){void 0!==N.appid&&""!==N.appid||this.showError(j)},validate:async function(e){if(void 0===N.appid||""===N.appid)return this.showError(j),!1;if(!e.websiteTitle)return this.showError(o),!1;if(l.getInvalidInputName().includes(e.websiteTitle))return this.showError(r),!1;if(e.ssrCheckBox&&e.webHostingCheckBox){var t=await i.unicloud.unimodulesExistsModule(N,"uni-ssr");if(F=t.funcitonPath,0==t.exist){if(await i.window.showMessageBox({type:"Info",title:s,text:"",buttons:[u,c]})==u){var n=i.extensions.getExtension("uni_modules");n?n.installDeps({fsPath:N.uri.fsPath,deps:["uni-ssr"]}):console.error("can't resolve extension:",extensionId)}return this.showError(""),!1}var a=await i.unicloud.getProjectBindSpace(N);if(0!=a.code)return this.showError(S),!1;{M=a.space;let t=M.spaceId;if(e.webHostingCheckBox&&(""==t||null==t||null==t))return this.showError(S),!1}}let p,d=e.selectSpaceList;return d&&(p=d.spaceId),!e.webHostingCheckBox||""!=p&&null!=p&&null!=p?e.webHostingCheckBox&&0==e.selectSpaceList.isOpenHostingService?(this.showError(b),!1):(this.showError(""),!0):(this.showError(w),!1)},onChanged:function(e,t,n){return n.selectSpaceList||(n.selectedSpaceId=A),"webHostingCheckBox"==e&&this.updateForm(f(n,H,N)),!0},...f({websiteTitle:T||N.name,websiteDomain:D||"",ssrCheckBox:!1,webHostingCheckBox:_,selectedSpaceId:A,uploadSourceMap:$},H,N)});V.then((async e=>{if(N.id){let t={};e.websiteTitle&&(t.websiteTitle=e.websiteTitle),void 0!==e.websiteDomain&&(t.websiteDomain=e.websiteDomain),void 0!==e.webHostingCheckBox&&(t.webHostingCheckBox=e.webHostingCheckBox),e.selectSpaceList&&e.selectSpaceList.spaceId&&(t.selectedSpaceId=e.selectSpaceList.spaceId),void 0!==e.uploadSourceMap&&(t.h5UploadSourceMap=e.uploadSourceMap),l.writePublishConfig(N.id,t)}let t=!1;1==e.ssrCheckBox&&(t=!0);let n,o=!1;e.webHostingCheckBox&&(o=!0);try{n=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:N})}catch(e){}if(n&&0==n.code&&1==n.unicloud&&!n.spaceId){let e=v,t=k,n=[];n.push(e),n.push(t);let o=y;if(await i.window.showMessageBox({type:"question",title:"",text:o,buttons:n})!=e)return}let a,r=i.window.createOutputChannel("HBuilder");if(t&&o&&e.selectSpaceList){let t,n;1==e.selectSpaceList.spaceType?t="aliyun":2==e.selectSpaceList.spaceType&&(t="tcb");let o=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/host/domain-list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:t,spaceId:e.selectSpaceList.spaceId,appid:N.appid}}});if(!o.service||1001!=o.service.code)return void(200==o.httpStatusCode?r.appendLine(o.service.description):r.appendLine(o.error));if(n=o.service.body.domains,1==n.length)a=n[0].domain;else{if(n.length<1)return void r.appendLine({line:x,level:"warning"});{let e=await i.window.showFormDialog({submitButtonText:C,cancelButtonText:P,validate:function(e){return!0},onChanged:function(e,t,n){},...I(n)});if(e.domainList<0)return void r.appendLine(E);a=n[e.domainList].domain}}}g({workspaceFolder:N,ssr:t,domain:a,customId:W,webTitle:e.websiteTitle,webDomain:e.websiteDomain,webHosting:o,clientId:"",funcitonPath:F,selectSpaceList:e.selectSpaceList,uploadSourceMap:e.uploadSourceMap,isCli:!1})})).catch((e=>{}))}}},809:e=>{e.exports=function e(t,n,i){function o(a,r){if(!n[a]){if(!t[a]){if(l)return l(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var l=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function i(e,t,n){var i;return e&&(i={b:e}),t&&((i=i||{}).a=t),n&&((i=i||{}).x=n),i}function o(e,t){if(null!==e&&"object"==typeof e){var n,a,r,s,u=c.getComment(e);if(u&&c.removeComment(e),"[object Array]"===Object.prototype.toString.apply(e)){for(s={a:{}},n=0,a=e.length;n<a;n++)l(s.a,n,u.a[n],o(e[n]))&&(r=!0);!r&&u.e&&(s.e=i(u.e[0],u.e[1]),r=!0)}else{s={s:{}};var p,d=Object.keys(e);for(u&&u.o?(p=[],u.o.concat(d).forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&p.indexOf(t)<0&&p.push(t)}))):p=d,s.o=p,n=0,a=p.length;n<a;n++){var h=p[n];l(s.s,h,u.c[h],o(e[h]))&&(r=!0)}!r&&u.e&&(s.e=i(u.e[0],u.e[1]),r=!0)}return t&&u&&u.r&&(s.r=i(u.r[0],u.r[1])),r?s:void 0}}function l(e,t,n,o){var l=i(n?n[0]:void 0,n?n[1]:void 0,o);return l&&(e[t]=l),l}function a(e,t){var n=i(t.b,t.a);return n.path=e,n}function r(e,t,n){if(e){var i,o;if(e.a)for(i=0,o=e.a.length;i<o;i++){var l=n.slice().concat([i]),s=e.a[i];s&&(t.push(a(l,s)),r(s.x,t,l))}else e.o&&e.o.forEach((function(i){var o=n.slice().concat([i]),l=e.s[i];l&&(t.push(a(o,l)),r(l.x,t,o))}));e.e&&t.push(a(n,e.e))}}function s(e,t,n,i){if(e){if(null===t||"object"!=typeof t)return void r(e,n,i);var o,l=c.createComment(t);if(0===i.length&&e.r&&(l.r=[e.r.b,e.r.a]),"[object Array]"===Object.prototype.toString.apply(t)){l.a=[];var u=e.a||{};for(var p in u)if(u.hasOwnProperty(p)){o=parseInt(p);var d=e.a[p];if(d){var h=i.slice().concat([o]);o<t.length?(l.a[o]=[d.b,d.a],s(d.x,t[o],n,h)):(n.push(a(h,d)),r(d.x,n,h))}}0===o&&e.e&&(l.e=[e.e.b,e.e.a])}else l.c={},l.o=[],(e.o||[]).forEach((function(o){var u=i.slice().concat([o]),c=e.s[o];Object.prototype.hasOwnProperty.call(t,o)?(l.o.push(o),c&&(l.c[o]=[c.b,c.a],s(c.x,t[o],n,u))):c&&(n.push(a(u,c)),r(c.x,n,u))})),e.e&&(l.e=[e.e.b,e.e.a])}}function u(e,t,n){var i=c.createComment(e,c.getComment(e));return i.r||(i.r=["",""]),(t||""===t)&&(i.r[n]=c.forceComment(t)),i.r[n]||""}var c=e("./hjson-common");t.exports={extract:function(e){return o(e,!0)},merge:function(e,t){var n=[];if(s(e,t,n,[]),n.length>0){var i=u(t,null,1);i+="\n# Orphaned comments:\n",n.forEach((function(e){i+=("# "+e.path.join("/")+": "+function(){var e="";return[].forEach.call(arguments,(function(t){t&&""!==t.trim()&&(e&&(e+="; "),e+=t.trim())})),e}(e.b,e.a,e.e)).replace("\n","\\n ")+"\n"})),u(t,i,1)}},header:function(e,t){return u(e,t,0)},footer:function(e,t){return u(e,t,1)}}},{"./hjson-common":2}],2:[function(e,t,n){"use strict";var i=e("os");t.exports={EOL:i.EOL||"\n",tryParseNumber:function(e,t){function n(){return o=e.charAt(s),s++,o}var i,o,l="",a=0,r=!0,s=0;for(n(),"-"===o&&(l="-",n());o>="0"&&o<="9";)r&&("0"==o?a++:r=!1),l+=o,n();if(r&&a--,"."===o)for(l+=".";n()&&o>="0"&&o<="9";)l+=o;if("e"===o||"E"===o)for(l+=o,n(),"-"!==o&&"+"!==o||(l+=o,n());o>="0"&&o<="9";)l+=o,n();for(;o&&o<=" ";)n();return t&&(","!==o&&"}"!==o&&"]"!==o&&"#"!==o&&("/"!==o||"/"!==e[s]&&"*"!==e[s])||(o=0)),i=+l,o||a||!isFinite(i)?void 0:i},createComment:function(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}},removeComment:function(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})},getComment:function(e){return e.__COMMENTS__},forceComment:function(e){if(!e)return"";var t,n,i,o,l=e.split("\n");for(i=0;i<l.length;i++)for(o=(t=l[i]).length,n=0;n<o;n++){var a=t[n];if("#"===a)break;if("/"===a&&("/"===t[n+1]||"*"===t[n+1])){"*"===t[n+1]&&(i=l.length);break}if(a>" "){l[i]="# "+t;break}}return l.join("\n")}}},{os:8}],3:[function(e,t,n){"use strict";function i(e,t){if(e)for(var n=0;n<e.length;n++){var i=e[n](t);if(void 0!==i)return i}}function o(){}function l(e){return"{"===e||"}"===e||"["===e||"]"===e||","===e}function a(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if("number"==typeof e)return 1/e==-1/0?"-0":e===1/0?"Inf":e===-1/0?"-Inf":isNaN(e)?"NaN":void 0}}}function r(e){var t=e&&e.out;return{name:"hex",parse:function(e){if(/^0x[0-9A-Fa-f]+$/.test(e))return parseInt(e,16)},stringify:function(e){if(t&&Number.isInteger(e))return"0x"+e.toString(16)}}}function s(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if("[object Date]"===Object.prototype.toString.call(e)){var t=e.toISOString();return-1!==t.indexOf("T00:00:00.000Z",t.length-14)?t.substr(0,10):t}}}}a.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0",r.description="parse hexadecimal numbers prefixed with 0x",s.description="support ISO dates",t.exports={loadDsf:function(e,t){function n(e){return"[object Function]"==={}.toString.call(e)}if("[object Array]"!==Object.prototype.toString.apply(e)){if(e)throw new Error("dsf option must contain an array!");return o}if(0===e.length)return o;var a=[];return e.forEach((function(e){if(!e.name||!n(e.parse)||!n(e.stringify))throw new Error("extension does not match the DSF interface");a.push((function(){try{if("parse"==t)return e.parse.apply(null,arguments);if("stringify"==t){var n=e.stringify.apply(null,arguments);if(void 0!==n&&("string"!=typeof n||0===n.length||'"'===n[0]||[].some.call(n,(function(e){return l(e)}))))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+n);return n}throw new Error("Invalid type")}catch(t){throw new Error("DSF-"+e.name+" failed; "+t.message)}}))})),i.bind(null,a)},std:{math:a,hex:r,date:s}}},{}],4:[function(e,t,n){"use strict";t.exports=function(t,n){function i(){b=0,v=" "}function o(e){return"{"===e||"}"===e||"["===e||"]"===e||","===e||":"===e}function l(e){var t,n=0,i=1;for(t=b-1;t>0&&"\n"!==w[t];t--,n++);for(;t>0;t--)"\n"===w[t]&&i++;throw new Error(e+" at line "+i+","+n+" >>>"+w.substr(b-n,20)+" ...")}function a(){return v=w.charAt(b),b++,v}function r(e){return w.charAt(b+e)}function s(e){for(var t="",n=v;a();){if(v===n)return a(),e&&"'"===n&&"'"===v&&0===t.length?(a(),u()):t;if("\\"===v)if(a(),"u"===v){for(var i=0,o=0;o<4;o++){a();var r,s=v.charCodeAt(0);v>="0"&&v<="9"?r=s-48:v>="a"&&v<="f"?r=s-97+10:v>="A"&&v<="F"?r=s-65+10:l("Bad \\u char "+v),i=16*i+r}t+=String.fromCharCode(i)}else{if("string"!=typeof P[v])break;t+=P[v]}else"\n"===v||"\r"===v?l("Bad string containing newline"):t+=v}l("Bad string")}function u(){function e(){for(var e=i;v&&v<=" "&&"\n"!==v&&e-- >0;)a()}for(var t="",n=0,i=0;;){var o=r(-i-5);if(!o||"\n"===o)break;i++}for(;v&&v<=" "&&"\n"!==v;)a();for("\n"===v&&(a(),e());;){if(v){if("'"===v){if(n++,a(),3===n)return"\n"===t.slice(-1)&&(t=t.slice(0,-1)),t;continue}for(;n>0;)t+="'",n--}else l("Bad multiline string");"\n"===v?(t+="\n",a(),e()):("\r"!==v&&(t+=v),a())}}function c(){if('"'===v||"'"===v)return s(!1);for(var e="",t=b,n=-1;;){if(":"===v)return e?n>=0&&n!==e.length&&(b=t+n,l("Found whitespace in your key name (use quotes to include)")):l("Found ':' but no key name (for an empty key name use quotes)"),e;v<=" "?v?n<0&&(n=e.length):l("Found EOF while looking for a key name (check your syntax)"):o(v)?l("Found '"+v+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):e+=v,a()}}function p(){for(;v;){for(;v&&v<=" ";)a();if("#"===v||"/"===v&&"/"===r(0))for(;v&&"\n"!==v;)a();else{if("/"!==v||"*"!==r(0))break;for(a(),a();v&&("*"!==v||"/"!==r(0));)a();v&&(a(),a())}}}function d(e,t){var n;for(e--,n=b-2;n>e&&w[n]<=" "&&"\n"!==w[n];n--);"\n"===w[n]&&n--,"\r"===w[n]&&n--;var i=w.substr(e,n-e+1);for(n=0;n<i.length;n++)if(i[n]>" "){var o=i.indexOf("\n");if(o>=0){var l=[i.substr(0,o),i.substr(o+1)];return t&&0===l[0].trim().length&&l.shift(),l}return[i]}return[]}function h(e){function t(e,n){var i,o,l,a;switch(typeof e){case"string":e.indexOf(n)>=0&&(a=e);break;case"object":if("[object Array]"===Object.prototype.toString.apply(e))for(i=0,l=e.length;i<l;i++)a=t(e[i],n)||a;else for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a=t(e[o],n)||a)}return a}function n(n){var i=t(e,n);return i?"found '"+n+"' in a string value, your mistake could be with:\n  > "+i+"\n  (unquoted strings contain everything up to the next line!)":""}return n("}")||n("]")}function m(){var e,t,n,i=[];try{if(k&&(e=x.createComment(i,{a:[]})),a(),t=b,p(),e&&(n=d(t,!0).join("\n")),"]"===v)return a(),e&&(e.e=[n]),i;for(;v;){if(i.push(I()),t=b,p(),","===v&&(a(),t=b,p()),e){var o=d(t);e.a.push([n||"",o[0]||""]),n=o[1]}if("]"===v)return a(),e&&(e.a[e.a.length-1][1]+=n||""),i;p()}l("End of input while parsing an array (missing ']')")}catch(e){throw e.hint=e.hint||h(i),e}}function f(e){var t,n,i,o="",r={};try{if(k&&(t=x.createComment(r,{c:{},o:[]})),e?n=1:(a(),n=b),p(),t&&(i=d(n,!0).join("\n")),"}"===v&&!e)return t&&(t.e=[i]),a(),r;for(;v;){if(o=c(),p(),":"!==v&&l("Expected ':' instead of '"+v+"'"),a(),r[o]=I(),n=b,p(),","===v&&(a(),n=b,p()),t){var s=d(n);t.c[o]=[i||"",s[0]||""],i=s[1],t.o.push(o)}if("}"===v&&!e)return a(),t&&(t.c[o][1]+=i||""),r;p()}if(e)return r;l("End of input while parsing an object (missing '}')")}catch(e){throw e.hint=e.hint||h(r),e}}function I(){switch(p(),v){case"{":return f();case"[":return m();case"'":case'"':return s(!0);default:return function(){var e=v;for(o(v)&&l("Found a punctuator character '"+v+"' when expecting a quoteless string (check your syntax)");;){a();var t="\r"===v||"\n"===v||""===v;if(t||","===v||"}"===v||"]"===v||"#"===v||"/"===v&&("/"===r(0)||"*"===r(0))){var n=e[0];switch(n){case"f":if("false"===e.trim())return!1;break;case"n":if("null"===e.trim())return null;break;case"t":if("true"===e.trim())return!0;break;default:if("-"===n||n>="0"&&n<="9"){var i=x.tryParseNumber(e);if(void 0!==i)return i}}if(t){e=e.trim();var s=y(e);return void 0!==s?s:e}}e+=v}}()}}function g(e,t){var n=b;if(p(),v&&l("Syntax error, found trailing characters"),k){var i=t.join("\n"),o=d(n).join("\n");(o||i)&&(x.createComment(e,x.getComment(e)).r=[i,o])}return e}var w,b,v,k,y,x=e("./hjson-common"),C=e("./hjson-dsf"),P={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};if("string"!=typeof t)throw new Error("source is not a string");var E=null,B=!0;return n&&"object"==typeof n&&(k=n.keepWsc,E=n.dsf,B=!1!==n.legacyRoot),y=C.loadDsf(E,"parse"),w=t,i(),B?function(){p();var e=k?d(1):null;switch(v){case"{":return g(f(),e);case"[":return g(m(),e)}try{return g(f(!0),e)}catch(t){i();try{return g(I(),e)}catch(e){throw t}}}():function(){p();var e=k?d(1):null;switch(v){case"{":return g(f(),e);case"[":return g(m(),e);default:return g(I(),e)}}()}},{"./hjson-common":2,"./hjson-dsf":3}],5:[function(e,t,n){"use strict";t.exports=function(t,n){function i(e,t){return L+=e[0].length+e[1].length-e[2]-e[3],e[0]+t+e[1]}function o(e){return e.replace(B,(function(e){var t=N[e];return"string"==typeof t?i(k.esc,t):i(k.uni,("0000"+e.charCodeAt(0).toString(16)).slice(-4))}))}function l(e,t,n,l){return e?(S.lastIndex=0,F.lastIndex=0,f||n||S.test(e)||void 0!==r.tryParseNumber(e,!0)||F.test(e)?(B.lastIndex=0,j.lastIndex=0,B.test(e)?j.test(e)||l||!g?i(k.qstr,o(e)):function(e,t){var n,o=e.replace(/\r/g,"").split("\n");if(t+=p,1===o.length)return i(k.mstr,o[0]);var l=c+t+k.mstr[0];for(n=0;n<o.length;n++)l+=c,o[n]&&(l+=t+o[n]);return l+c+t+k.mstr[1]}(e,t):i(k.qstr,e)):i(k.str,e)):i(k.qstr,"")}function a(e){return e?m||O.test(e)?(B.lastIndex=0,i(k.qkey,B.test(e)?o(e):e)):i(k.key,e):'""'}var r=e("./hjson-common"),s=e("./hjson-dsf"),u={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},c=r.EOL,p="  ",d=!1,h=!1,m=!1,f=!1,I=0,g=1,w="",b=null,v=!1,k=u;if(n&&"object"==typeof n){n.quotes="always"===n.quotes?"strings":n.quotes,"\n"!==n.eol&&"\r\n"!==n.eol||(c=n.eol),d=n.keepWsc,I=n.condense||0,h=n.bracesSameLine,m="all"===n.quotes||"keys"===n.quotes,f="all"===n.quotes||"strings"===n.quotes||!0===n.separator,g=f||"off"==n.multiline?0:"no-tabs"==n.multiline?2:1,w=!0===n.separator?k.com[0]:"",b=n.dsf,v=n.sortProps,"number"==typeof n.space?p=new Array(n.space+1).join(" "):"string"==typeof n.space&&(p=n.space),!0===n.colors&&(k={obj:["[37m{[0m","[37m}[0m"],arr:["[37m[[0m","[37m][0m"],key:["[33m","[0m"],qkey:['[33m"','"[0m'],col:["[37m:[0m",""],com:["[37m,[0m",""],str:["[37;1m","[0m"],qstr:['[37;1m"','"[0m'],mstr:["[37;1m'''","'''[0m"],num:["[36;1m","[0m"],lit:["[36m","[0m"],dsf:["[37m","[0m"],esc:["[31m\\","[0m"],uni:["[31m\\u","[0m"],rem:["[35m","[0m"]});var y,x=Object.keys(u);for(y=x.length-1;y>=0;y--){var C=x[y];k[C].push(u[C][0].length,u[C][1].length)}}var P,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\ufeff￰-￿",B=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp("^\\s|^\"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-"+E+"]","g"),j=new RegExp("'''|^[\\s]+$|[\0-"+(2===g?"\t":"\b")+"\v\f-"+E+"]","g"),F=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),N={"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,q="",L=0;P=s.loadDsf(b,"stringify");var M="",T=d?T=(r.getComment(t)||{}).r:null;return T&&T[0]&&(M=T[0]+"\n"),M+=function e(t,n,o,s){function u(e){return e&&"\n"===e["\r"===e[0]?1:0]}function m(e){return e&&!u(e)}function b(e,t,n){if(!e)return"";var o,l=(e=r.forceComment(e)).length;for(o=0;o<l&&e[o]<=" ";o++);return n&&o>0&&(e=e.substr(o)),o<l?t+i(k.rem,e):e}var y=P(t);if(void 0!==y)return i(k.dsf,y);switch(typeof t){case"string":return l(t,q,n,s);case"number":return isFinite(t)?i(k.num,String(t)):i(k.lit,"null");case"boolean":return i(k.lit,String(t));case"object":if(!t)return i(k.lit,"null");var x;d&&(x=r.getComment(t));var C,E,B,S,j,F,N,O,M,T,D="[object Array]"===Object.prototype.toString.apply(t),A=q,H=c+A,W=c+(q+=p),_=o||h?"":H,$=[],V=I?[]:null,U=f,R=g,Q=w?"":k.com[0],J=0;if(D){for(E=0,B=t.length;E<B;E++){if(C=E<B-1,x?(O=m((N=x.a[E]||[])[1]),$.push(b(N[0],"\n")+W),V&&(N[0]||N[1]||O)&&(V=null)):$.push(W),L=0,j=t[E],$.push(e(j,!!x&&O,!0)+(C?w:"")),V){switch(typeof j){case"string":L=0,f=!0,g=0,V.push(e(j,!1,!0)+(C?k.com[0]:"")),f=U,g=R;break;case"object":if(j){V=null;break}default:V.push($[$.length-1]+(C?Q:""))}C&&(L+=k.com[0].length-k.com[2]),J+=L}x&&N[1]&&$.push(b(N[1],O?" ":"\n",O))}0===B?x&&x.e&&$.push(b(x.e[0],"\n")+H):$.push(H),0===$.length?M=i(k.arr,""):(M=_+i(k.arr,$.join("")),V&&(T=V.join(" ")).length-J<=I&&(M=i(k.arr,T)))}else{var K=x?x.o.slice():[],Z=[];for(S in t)Object.prototype.hasOwnProperty.call(t,S)&&K.indexOf(S)<0&&Z.push(S);v&&Z.sort();var z=K.concat(Z);for(E=0,B=z.length;E<B;E++)if(C=E<B-1,S=z[E],x?(O=m((N=x.c[S]||[])[1]),$.push(b(N[0],"\n")+W),V&&(N[0]||N[1]||O)&&(V=null)):$.push(W),L=0,F=e(j=t[S],x&&O),$.push(a(S)+k.col[0]+(u(F)?"":" ")+F+(C?w:"")),x&&N[1]&&$.push(b(N[1],O?" ":"\n",O)),V){switch(typeof j){case"string":L=0,f=!0,g=0,F=e(j,!1),f=U,g=R,V.push(a(S)+k.col[0]+" "+F+(C?k.com[0]:""));break;case"object":if(j){V=null;break}default:V.push($[$.length-1]+(C?Q:""))}L+=k.col[0].length-k.col[2],C&&(L+=k.com[0].length-k.com[2]),J+=L}0===B?x&&x.e&&$.push(b(x.e[0],"\n")+H):$.push(H),0===$.length?M=i(k.obj,""):(M=_+i(k.obj,$.join("")),V&&(T=V.join(" ")).length-J<=I&&(M=i(k.obj,T)))}return q=A,M}}(t,null,!0,!0),T&&(M+=T[1]||""),M}},{"./hjson-common":2,"./hjson-dsf":3}],6:[function(e,t,n){t.exports="3.2.1"},{}],7:[function(e,t,n){"use strict";var i=e("./hjson-common"),o=e("./hjson-version"),l=e("./hjson-parse"),a=e("./hjson-stringify"),r=e("./hjson-comments"),s=e("./hjson-dsf");t.exports={parse:l,stringify:a,endOfLine:function(){return i.EOL},setEndOfLine:function(e){"\n"!==e&&"\r\n"!==e||(i.EOL=e)},version:o,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,l(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,a(e,t)}},comments:r,dsf:s.std}},{"./hjson-comments":1,"./hjson-common":2,"./hjson-dsf":3,"./hjson-parse":4,"./hjson-stringify":5,"./hjson-version":6}],8:[function(e,t,n){},{}]},{},[7])(7)},97:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"huawei.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.huawei",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={hwPublish:async function(e){let t=a(7,null,a(8,null)),n=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let n=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:n})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.huaweiNameInput&&(u=e.huaweiNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(t){s&&o.writePublishConfig(s,{huaweiNameInput:t.nameInput}),r({workspaceFolder:l,name:t.nameInput,customId:e.args.customId})}))}}},192:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"jingdong.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.jingdong",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let t=a(3,null),n=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null);return{customButtons:[{text:t},{text:i},{text:n,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:270,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""}]}}e.exports={jdPublish:async function(e){let t=a(9,null,a(10,null)),n=a(11,null,a(12,null)),l=a(13,null,a(14,null)),u=e.workspaceFolder;if(e.args&&e.args.isCli){let t=e.args,a=t.clientId;return o.getInvalidInputName().includes(t.name)?void i.cliconsole.log({clientId:a,msg:n,status:"Error"}):t.appid?void r({workspaceFolder:u,name:t.name,appid:t.appid,clientId:a,customId:""}):void i.cliconsole.log({clientId:a,msg:l,status:"Error"})}let c,p=u.id,d=u.name,h=o.getAppInfo(u,"mp-jd");if(console.log("jingdongInfo@@",h),h&&h.appid&&(c=h.appid),p){let e=o.readPublishConfig(p);console.log("projectIdData@@",e),e&&(e.jdNameInput&&(d=e.jdNameInput),!c&&e.jdAppidInput&&(c=e.jdAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(n),!1):!!e.appidInput||(this.showError(l),!1):(this.showError(t),!1)},onChanged:function(e,t,n){},...s({nameInput:d,appidInput:c})}).then((function(t){if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:p,optionType:"mp-jd.appid"});if(1===t.buttonIndex)return;const n=t.result;p&&o.writePublishConfig(p,{jdNameInput:n.nameInput,jdAppidInput:n.appidInput}),r({workspaceFolder:u,name:n.nameInput,appid:n.appidInput,customId:e.args.customId})}))}}},864:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"kuaishou.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.kuaishou",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={ksPublish:async function(e){let t=a(7,null,a(8,null)),n=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let n=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:n})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.kuaishouNameInput&&(u=e.kuaishouNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(t){s&&o.writePublishConfig(s,{kuaishouNameInput:t.nameInput}),r({workspaceFolder:l,name:t.nameInput,customId:e.args.customId})}))}}},369:(e,t,n)=>{const i=n(283),o=n(17),l=n(460),a=n(325),r=n(147),s=n(37),u=n(942).loadMessageBundle(n(17).join(__dirname,"native_app.js"));function c(e){const{clientId:t}=e;l.compile(e).then((function(){t&&i.cliconsole.log({clientId:t,msg:"",status:"Error"})}),(function(){t&&i.cliconsole.log({clientId:t,msg:"",status:"Error"})}))}function p(e){const{appId:t,pathInput:n,confuse:i,sourcemap:o}=e,l=u(0,null),a=u(1,null),r=u(2,null,`${void 0===t?"":t}`),s=(u(3,null),u(4,null)),c=`${u(5,null)}<a href="https://uniapp.dcloud.io/tutorial/app-sec-confusion">[${u(6,null)}]</a>`,p=u(7,null);return{title:l,formItems:[{type:"label",name:"label1",text:a},{type:"label",name:"label2",text:r},{type:"fileSelectInput",name:"pathInput",mode:"folder",appendSuffix:`/${t}.wgt`,placeholder:s,value:n},{type:"checkBox",name:"sourcemap",label:`${u(8,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${p}</a>`,value:void 0!==o&&o},{type:"checkBox",name:"confuse",label:c,value:void 0!==i&&i}]}}e.exports={exportWgt:function(e){const{args:t,workspaceFolder:n}=e,l=u(9,null),d=u(10,null),h=u(11,null),m=u(12,null),f=u(13,null),I=u(14,null);if(!0===t.isCli){const e=t.name,l=t.path,a=t.clientId;return""===l?void i.cliconsole.log({clientId:a,msg:d,status:"Error"}):void c({type:"export.wgt",workspaceFolder:n,path:o.join(l,e),confuse:t.confuse,uploadSourceMap:t.sourceMap,clientId:a})}let g={appId:n.appid,pathInput:o.join(n.uri.fsPath,"unpackage/release",n.appid+".wgt"),confuse:!1,sourcemap:!1};const w=a.readPublishConfig(n.id);w&&(void 0!==w.wgtConfuse&&(g.confuse=w.wgtConfuse),void 0!==w.wgtSourcemap&&(g.sourcemap=w.wgtSourcemap)),i.window.showFormDialog({width:420,height:300,submitButtonText:f,cancelButtonText:I,...p(g),onOpened(){void 0!==n.appid&&""!==n.appid||this.showError(l)},onChanged(e,t,n){},validate(e){const{pathInput:t}=e;if(""===t)return this.showError(d),!1;if(t.split("/").length<=1&&t.split("\\").length<=1)return this.showError(h),!1;if(t.endsWith("/")||t.endsWith("\\"))return this.showError(m),!1;{let e=t.split("/");e.length<=1&&(e=t.split("\\")),e.length=e.length-1;const i=o.join(n.uri.fsPath,"unpackage/release"),l="Windows_NT"===s.type()?"\\":"/";let a=e.join(l);if(a!=i&&!r.existsSync(a))return this.showError(h),!1}return!0}}).then((function(e){const{pathInput:t,confuse:i,sourcemap:o}=e;a.writePublishConfig(n.id,{wgtConfuse:i,wgtSourcemap:o}),c({type:"export.wgt",workspaceFolder:n,path:t,confuse:i,uploadSourceMap:o})}))},exportResource:function(e){const{args:t,workspaceFolder:n}=e;let i="";i=t.clientId,c({type:"export.resource",workspaceFolder:n,clientId:i})}}},829:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"qq.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.qq",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let t=a(3,null),n=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:t},{text:i},{text:n,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={qqPublish:async function(e){let t=a(12,null,"QQ"),n=a(13,null,"QQ"),l=a(14,null,"QQ"),u=a(15,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"});let a=e.appid;if(null==a||null==a){let t=o.getAppInfo(c,"mp-qq");if(t&&t.appid&&(a=t.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-qq");if(m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.qqNameInput&&(h=e.qqNameInput),!p&&e.qqAppidInput&&(p=e.qqAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){if("subPackageCheckBox"==e){let e=s(n);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(t){if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-qq.appid"});if(1===t.buttonIndex)return;const n=t.result;d&&o.writePublishConfig(d,{qqNameInput:n.nameInput,qqAppidInput:n.appidInput}),r({workspaceFolder:c,name:n.nameInput,appid:n.appidInput,subPackage:n.subPackageInput,customId:e.args.customId})}))}}},8:(e,t,n)=>{const i=n(283),o=n(325),l=n(460),a=n(942).loadMessageBundle(n(17).join(__dirname,"quickappunion.js"));async function r(e){let t=a(0,null),n=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.quickappunion",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={qauPublish:async function(e){let t=a(7,null,a(8,null)),n=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let n=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:n})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.quickappNameInput&&(u=e.quickappNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(n),!1):(this.showError(t),!1)},onChanged:function(e,t,n){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(t){s&&o.writePublishConfig(s,{quickappNameInput:t.nameInput}),r({workspaceFolder:l,name:t.nameInput,customId:e.args.customId})}))}}},325:(e,t,n)=>{var i=n(147),o=n(37),l=n(809);e.exports={readPublishConfig:function(e){let t;try{let n=o.tmpdir();n+="/publish_uni.json";let l=o.tmpdir();if(l+="/publish_uni.json",e&&i.existsSync(l)){let n,o=i.readFileSync(l);try{n=JSON.parse(o)}catch(e){}n&&(t=n[""+e])}}catch(e){}return t},writePublishConfig:function(e,t){try{let l=o.tmpdir();if(e&&i.existsSync(l)){let o;if(l+="/publish_uni.json",e&&i.existsSync(l)){let e=i.readFileSync(l);try{o=JSON.parse(e)}catch(e){}}o&&"object"==typeof o||(o={id:""});let a=o[e];if(a||(a={}),t)for(var n in t)a[""+n]=t[n];o[""+e]=a;let r=JSON.stringify(o,null,"\t");r&&i.writeFileSync(l,r)}}catch(e){}},getAppInfo:function(e,t){let n,o=e.uri.fsPath;if(o+="/manifest.json",o&&i.existsSync(o)){let e=i.readFileSync(o,"utf8"),a=l.parse(e);a&&a[t]&&(n=a[t])}return n},getInvalidInputName:function(){return["test","测试","abc","asd","sdf"]}}},930:(e,t,n)=>{var i=n(283),o=n(147);n(37);const l=n(460);var a=n(809),r=n(325);const s=n(942).loadMessageBundle(n(17).join(__dirname,"weapp.js"));function u(e){let t=s(0,null),n=s(1,null),i=s(2,null);const o=s(3,null);let l=`${s(4,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${o}</a>`,a=s(5,null),r=`${s(6,null)} <a href="https://hx.dcloud.net.cn/cli/publish-mp-weixin?id=uploadPrivateKey">${o}</a>`,u=s(7,null),c=s(8,null),p=s(9,null);const d=s(10,null);let h=`${s(11,null)} <a href='https://uniad.dcloud.net.cn'>uniAD</a> ${s(12,null)}，<a href='https://ask.dcloud.net.cn/article/39928'>${s(13,null)}</a> | <a href='https://uniapp.dcloud.io/component/ad.html'>${s(14,null)}</a>`,m=`<a href="https://hx.dcloud.net.cn/cli/publish-mp-weixin">${s(15,null)}</a>`;const f=`${s(16,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${o}</a>`;return{title:t,hideSubTitile:!0,width:600,height:200,footer:h,cornerWidget:{type:"label",name:"cornerTip",text:m},formItems:[{type:"input",name:"nameInput",placeholder:n,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:i,value:e.appidInput},{type:"checkBox",name:"uploadSourceMap",label:f,value:!!e.uploadSourceMap&&e.uploadSourceMap},{type:"checkBox",name:"behaviorCheckBox",label:l,value:!!e.behaviorCheckBox&&e.behaviorCheckBox},{type:"input",name:"subPackgeInput",placeholder:a,isHidden:!e.behaviorCheckBox||1!=e.behaviorCheckBox,value:e.subPackgeInput},{type:"checkBox",name:"uploadWeappCheckBox",label:r,value:!!e.uploadWeappCheckBox&&e.uploadWeappCheckBox},{type:"input",name:"weappVersionInput",placeholder:u,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.weappVersionInput},{type:"fileSelectInput",name:"fileSelectInput",placeholder:c,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.fileSelectInput?e.fileSelectInput:""},{type:"input",name:"weappDescInput",placeholder:p,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.weappDescInput},{type:"input",name:"weappRobotInput",placeholder:d,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:(e.weappRobotInput||1)+""}].map((e=>{if(e&&!e.isHidden)return e}))}}async function c(e){let t=s(17,null,"weapp-miniprogram-ci"),n=s(18,null),a=s(19,null);if(e&&e.uploadWeapp){let o=i.window.createOutputChannel("HBuilder"),l=await i.extensions.existsPlugin("weapp-miniprogram-ci");if(0!=l.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:l.msg,status:"Error"}):o.appendLine(l.msg));if(!l.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}),i.extensions.installPlugin("weapp-miniprogram-ci")):i.window.showMessageBox({type:"warning",title:"",text:t,buttons:[n,a]}).then((e=>{console.log(e),e==n&&i.extensions.installPlugin("weapp-miniprogram-ci")})))}let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.weapp",name:e.name,appid:e.appid,customId:e.customId,subPackge:e.subPackge,clientId:e.clientId,uploadWeapp:e.uploadWeapp,uploadSourceMap:e.uploadSourceMap});if(r&&0==r.code&&e&&e.uploadWeapp){let n=r.buildClientPath,l=e.privatekey,a=e.version,s=e.description;if(n&&o.existsSync(n)){let o=i.extensions.getExtension("weapp-miniprogram-ci");o?await o.upload({appid:e.appid,buildClientPath:n,privatekey:l,version:a,description:s,clientId:e.clientId,robot:e.robot||1}):(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"}),outputChannel.appendLine(t))}}}function p(e,t){let n,i=e.uri.fsPath;if(i+="/manifest.json",i&&o.existsSync(i)){let e=o.readFileSync(i,"utf8"),l=a.parse(e);l&&l[t]&&(n=l[t])}return n}e.exports={weAppPublish:async function(e){let t=!1;e&&e.args&&e.args.isCli&&(t=e.args.isCli);let n=s(20,null),l=s(21,null),a=s(22,null),d=s(23,null,s(24,null)),h=s(25,null,s(26,null)),m=s(27,null,s(28,null)),f=s(29,null),I=s(30,null),g=s(31,null),w=s(32,null),b=s(33,null),v=s(34,null),k=s(35,null);const y=s(36,null);let x=e.workspaceFolder;if(1==t){if(console.log("name -----",e.args.name),r.getInvalidInputName().includes(e.args.name))return void i.cliconsole.log({clientId:e.args.clientId,msg:h,status:"Error"});if(e.args.upload&&!e.args.version){let t=p(x,"versionName");if(!t)return void await i.cliconsole.log({clientId:e.args.clientId,msg:I,status:"Error"});e.args.version=t}if(e.args.upload&&!e.args.description)return void await i.cliconsole.log({clientId:e.args.clientId,msg:b,status:"Error"});if(!e.args.appid){let t=p(x,"mp-weixin");if(!t||!t.appid)return void await i.cliconsole.log({clientId:e.args.clientId,msg:m,status:"Error"});e.args.appid=t.appid}return await c({workspaceFolder:x,name:e.args.name,appid:e.args.appid,subPackge:e.args.subPackge,uploadWeapp:e.args.upload,clientId:e.args.clientId,version:e.args.version,description:e.args.description,privatekey:e.args.privatekey,uploadSourceMap:e.args.sourceMap,robot:e.args.robot}),void await i.cliconsole.log({clientId:e.args.clientId,msg:"",status:"Error"})}let C,P,E,B=x.id,S=!1,j=p(x,"versionName"),F=1,N=p(x,"name"),O=p(x,"mp-weixin");O&&(E=O.appid);let q=!1;if(B){let e=r.readPublishConfig(B);e&&e.weappName&&(N=e.weappName),e&&e.weappAppid&&(E=e.weappAppid),e&&void 0!==e.uploadWeapp&&(S=e.uploadWeapp),e&&e.weappUploadVersion&&(j=e.weappUploadVersion),e&&e.weappPrivatekey&&(P=e.weappPrivatekey),e&&e.weappUploadDescription&&(C=e.weappUploadDescription),e&&e.weappUploadRobot&&(F=e.weappUploadRobot),e&&void 0!==e.weappUploadSourceMap&&(q=e.weappUploadSourceMap)}i.window.showFormDialog({customButtons:[{text:n},{text:l,role:"accept"}],onOpened(){void 0!==x.appid&&""!==x.appid||this.showError(y)},validate:async function(e){if(void 0===x.appid||""===x.appid)return this.showError(y),!1;if(!e.nameInput)return this.showError(d),!1;if(r.getInvalidInputName().includes(e.nameInput))return this.showError(h),!1;if(!e.appidInput)return this.showError(m),!1;if(e.behaviorCheckBox&&!e.subPackgeInput)return this.showError(f),!1;if(e.uploadWeappCheckBox&&!e.weappVersionInput)return this.showError(I),!1;if(e.uploadWeappCheckBox&&!e.fileSelectInput)return this.showError(g),!1;if(e.uploadWeappCheckBox&&!o.existsSync(e.fileSelectInput))return this.showError(w),!1;if(e.uploadWeappCheckBox&&!e.weappDescInput)return this.showError(b),!1;if(e.uploadWeappCheckBox&&e.weappRobotInput){const t=Number(e.weappRobotInput);if(!t)return this.showError(v),!1;if(t<1||t>30)return this.showError(k),!1}return this.showError(""),!0},onChanged:function(e,t,n){if("behaviorCheckBox"==e||"uploadWeappCheckBox"==e){"uploadWeappCheckBox"!=e||n.weappVersionInput||(n.weappVersionInput=j),"uploadWeappCheckBox"!=e||n.fileSelectInput||(n.fileSelectInput=P),"uploadWeappCheckBox"!=e||n.weappDescInput||(n.weappDescInput=C),"behaviorCheckBox"==e&&1==n.behaviorCheckBox&&(n.uploadWeappCheckBox=!1),"uploadWeappCheckBox"==e&&1==n.uploadWeappCheckBox&&(n.behaviorCheckBox=!1);let t=u(n);this.updateForm(t)}return!0},...u({nameInput:N,appidInput:E,uploadWeappCheckBox:S,weappVersionInput:j,weappDescInput:C,fileSelectInput:P,weappRobotInput:F,uploadSourceMap:q})}).then((async t=>{if(0===t.buttonIndex)return void i.window.showManifestEditPart({projectId:B,optionType:"mp-weixin.appid"});const n=t.result;let o=n.nameInput,l=n.appidInput,u=n.behaviorCheckBox,p=n.uploadWeappCheckBox;j=n.weappVersionInput,C=n.weappDescInput,P=n.fileSelectInput,F=Number(n.weappRobotInput)||F,q=n.uploadSourceMap;let d=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:x});if(d&&0==d.code&&1==d.unicloud&&!d.spaceId){let e=s(37,null),t=[];t.push(e),t.push(a);let n=s(38,null);if(await i.window.showMessageBox({type:"question",title:"",text:n,buttons:t})!=e)return}let h,m={weappName:o,weappAppid:l,uploadWeapp:p,weappUploadSourceMap:q};p&&(m.weappUploadVersion=j,m.weappPrivatekey=P,m.weappUploadDescription=C,m.weappUploadRobot=F),r.writePublishConfig(B,m),u&&(h=n.subPackgeInput),await c({workspaceFolder:x,type:"publish.weapp",name:o,appid:l,customId:e.args.customId,subPackge:h,uploadWeapp:p,version:j,description:C,robot:F,privatekey:P,uploadSourceMap:q})})).catch((e=>{}))}}},283:e=>{"use strict";e.exports=require("hbuilderx")},942:e=>{"use strict";e.exports=require("hxnls")},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={},n=function n(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}(24);module.exports=n})();